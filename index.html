<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>10초만</title>
    <link rel="icon" type="image/svg+xml" href="assets/icon.svg">
    <link rel="apple-touch-icon" href="assets/icon.svg">
    <!-- Google Fonts: Inter & Outfit -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Outfit:wght@500;700&family=Noto+Sans+KR:wght@700;900&family=Black+Han+Sans&family=Gowun+Batang:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Main CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <div id="app-container">
        <!-- Splash Screen -->
        <section id="view-splash" class="view active">
            <div class="splash-content">
                <div class="logo-container">
                    <img src="assets/icon.svg" alt="App Icon" style="width: 80px; height: 80px; margin-bottom: 20px;">
                    <!-- Master Logo -->
                    <img src="assets/logo_master.svg" alt="10초만 Logo"
                        style="height: 70px; display: block; margin: 0 auto;">
                </div>
                <div class="loader"></div>
            </div>
        </section>

        <!-- Onboarding -->
        <section id="view-onboarding" class="view">
            <div class="onboarding-step">
                <div class="anim-container" id="onboarding-anim">
                    <!-- Dynamic Icon Animation will go here -->
                    <i class="fa-solid fa-mobile-screen-button bounce"></i>
                </div>
                <h2>Easy Check</h2>
                <p>NFC 태그 - 스마트폰 밀착 - 10초 측정</p>
                <button class="btn-primary" onclick="app.router.navigate('home')">시작하기</button>
            </div>
        </section>

        <!-- Main Hub (Home) -->
        <section id="view-home" class="view">
            <header class="app-header">
                <img src="assets/logo_master.svg" alt="10초만 Logo" style="height: 50px; border: none;">
            </header>

            <main>
                <div class="nfc-scan-area" onclick="app.views.home.startScan()">
                    <div class="nfc-wrapper">
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <!-- Removed transition-overlay -->
                        <div class="nfc-btn">
                            <img src="assets/icon_bars.svg" alt="Scan Icon" style="width: 140px; height: 140px;">
                        </div>
                    </div>
                    <p class="blink">태그를 인식해주세요</p>
                </div>
            </main>
        </section>

        <!-- Measurement -->
        <section id="view-measurement" class="view">
            <!-- Invisible Header for Spacing Alignment -->
            <header class="app-header" style="opacity: 0; pointer-events: none;">
                <img src="assets/logo_master.svg" alt="10초만 Logo" style="height: 50px; border: none;">
            </header>

            <main style="display: flex; flex-direction: column; justify-content: center; width: 100%; flex: 1;">
                <div class="measurement-content"
                    style="width: 100%; flex: 1; display: flex; flex-direction: column; justify-content: center;">
                    <!-- Ripple Animation Reused -->
                    <div class="nfc-scan-area" style="cursor: default; padding-bottom: 120px;">
                        <div class="nfc-wrapper">
                            <!-- Progress Ring SVG -->
                            <svg class="progress-ring" width="240" height="240">
                                <circle class="progress-ring__circle" stroke="#ffffff" stroke-width="8"
                                    fill="transparent" r="110" cx="120" cy="120" />
                            </svg>

                            <!-- More active waves for measurement -->
                            <div class="wave" style="animation-duration: 2s; background: rgba(255, 255, 255, 0.2);">
                            </div>
                            <div class="wave"
                                style="animation-delay: 0.5s; animation-duration: 2s; background: rgba(255, 255, 255, 0.1);">
                            </div>
                            <div class="wave"
                                style="animation-delay: 1.0s; animation-duration: 2s; background: rgba(255, 255, 255, 0.05);">
                            </div>

                            <div class="nfc-btn"
                                style="background: white; color: #00c6ff; box-shadow: 0 0 30px rgba(255,255,255,0.3);">
                                <img src="assets/icon_bars.svg" alt="Scan Icon"
                                    style="width: 140px; height: 140px; filter: invert(39%) sepia(93%) saturate(1914%) hue-rotate(198deg) brightness(102%) contrast(106%);">
                                <!-- Filter to match blue #00c6ff roughly -->
                            </div>
                        </div>

                        <p id="progress-text"
                            style="color: rgba(255,255,255,0.8); margin-top: 30px; z-index: 10; text-align: center; width: 100%;">
                            소리를 분석하고 있습니다
                        </p>
                    </div>
                </div>
            </main>
        </section>

        <!-- Diagnosis Result -->
        <section id="view-result" class="view">
            <div class="result-header">
                <button class="btn-back" onclick="app.router.navigate('home')"><i
                        class="fa-solid fa-chevron-left"></i></button>
                <h2>AI 판정 결과</h2>
            </div>
            <div class="result-content" id="result-content">
                <!-- Dynamic Content: Safe or Danger -->
            </div>
        </section>

        <!-- Management -->
        <section id="view-management" class="view">
            <header class="app-header">
                <!-- Back button removed -->
                <h2>내 장비 현황</h2>
            </header>
            <main class="management-main">
                <div class="equipment-grid">
                    <!-- Card 1 -->
                    <div class="equip-card" onclick="app.views.report.show('dn2100')">
                        <div class="equip-img-wrapper">
                            <img src="assets/equipment/DN Solutions Lynx 2100.png" alt="DN Solutions Lynx 2100">
                            <span class="status-badge safe">정상</span>
                        </div>
                        <div class="equip-info">
                            <h3>DN Solutions Lynx 2100</h3>
                            <p>CNC 터닝 센터</p>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div class="equip-card" onclick="app.views.report.show('kf5600')">
                        <div class="equip-img-wrapper">
                            <img src="assets/equipment/현대위아 KF5600 II.png" alt="Hyundai WIA KF5600 II">
                            <span class="status-badge warning">점검 필요</span>
                        </div>
                        <div class="equip-info">
                            <h3>현대위아 KF5600 II</h3>
                            <p>수직형 머시닝 센터</p>
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div class="equip-card" onclick="app.views.report.show('ys080')">
                        <div class="equip-img-wrapper">
                            <img src="assets/equipment/현대로보틱스 YS080.png" alt="Hyundai Robotics YS080">
                            <span class="status-badge safe">정상</span>
                        </div>
                        <div class="equip-info">
                            <h3>현대로보틱스 YS080</h3>
                            <p>산업용 로봇</p>
                        </div>
                    </div>

                    <!-- Card 4 -->
                    <div class="equip-card" onclick="app.views.report.show('as50')">
                        <div class="equip-img-wrapper">
                            <img src="assets/equipment/경원기계 AS-50.png" alt="Kyungwon Machinery AS-50">
                            <span class="status-badge danger">위험</span>
                        </div>
                        <div class="equip-info">
                            <h3>경원기계 AS-50</h3>
                            <p>에어 컴프레서</p>
                        </div>
                    </div>
                </div>

            </main>

            <!-- Draggable Bottom Sheet -->
            <div class="bottom-sheet" id="equipment-sheet">
                <div class="sheet-handle-wrapper">
                    <div class="sheet-handle"></div>
                </div>

                <div class="sheet-content">
                    <!-- Page 1: Main Dashboard -->
                    <div class="sheet-section-main">
                        <div class="sheet-top-section">
                            <span class="sheet-sub-title"
                                style="font-size: 1.1rem; font-weight: 600; color: var(--text-main);">전체 설비 효율 현황</span>
                        </div>

                        <div class="dashboard-container">
                            <!-- Chart Section -->
                            <div class="chart-section">
                                <div class="donut-chart-wrapper">
                                    <div class="donut-chart" id="efficiency-chart"></div>
                                    <div class="chart-center-text">
                                        <span class="chart-number" id="total-efficiency">0%</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Stats Grid -->
                            <div class="stats-summary-grid">
                                <div class="stat-box">
                                    <span class="stat-label">정상</span>
                                    <span class="stat-val safe" id="sheet-count-safe">0</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-label">주의</span>
                                    <span class="stat-val warning" id="sheet-count-warning">0</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-label">위험</span>
                                    <span class="stat-val danger" id="sheet-count-danger">0</span>
                                </div>
                            </div>
                        </div>

                        <!-- AI Chat Banner -->
                        <div class="ai-banner">
                            <div class="ai-banner-left">
                                <div class="ai-icon-donut"></div>
                                <input type="text" class="ai-input" placeholder="설비 효율을 올리고 싶어요.">
                            </div>
                            <i class="fa-solid fa-magnifying-glass ai-search-icon"></i>
                        </div>

                        <!-- Scroll Hint (Optional, gives user clue) -->
                        <div class="scroll-hint">
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                    </div>

                    <!-- Page 2: Detailed List -->
                    <div class="sheet-section-details">
                        <div class="list-section">
                            <h3 class="list-section-title">장비별 상세 현황</h3>
                            <div class="equipment-list-clean" id="sheet-equipment-list">
                                <!-- Injected via JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Equipment Report (New) -->
        <section id="view-report" class="view">
            <header class="app-header">
                <button class="btn-back" onclick="app.router.navigate('management')">
                    <i class="fa-solid fa-arrow-left"></i>
                </button>
                <h2>정밀 진단 리포트</h2>
            </header>
            <main class="report-main" id="report-content">
                <!-- Content injected by JS -->
            </main>
        </section>

        <!-- Global Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="active" data-target="home" onclick="app.router.navigate('home')"><i
                    class="fa-solid fa-house"></i></button>
            <button data-target="management" onclick="app.router.navigate('management')"><i
                    class="fa-solid fa-chart-simple"></i></button>
            <button data-target="settings"><i class="fa-solid fa-gear"></i></button>
        </nav>

    </div>

    <script src="js/app.js"></script>
</body>

</html>